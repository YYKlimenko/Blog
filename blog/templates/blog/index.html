<!DOCTYPE html>
<html>
<head>
    <title>Блог — Главная страница</title>
</head>
<body>


<form method="post" action="{% url 'blog:search' %}">
    {{ form.text }}
    {% csrf_token %}
   <button type="submit">Поиск</button>
</form>

{% if request.user.is_authenticated %}
<p> {{ user.username }} <a href="{% url 'logout' %}">Выйти</a> </p>
{% else %}
<p> <a href="{% url 'login' %}"> Войти </a><a href="{% url 'register' %}"> Регистрация </a></p>
{% endif %}


<ul>
    {% for post in posts %}
    <li>
        <h2 id="{{ post.id }}">{{ post.title }}</h2>
        <h4>{{ post.date_pub }} Категория: <a href="{% url 'blog:category' post.category.slug %}"> {{post.category}} </a></h4>
        <h4> {{ post.author.first_name }} {{ post.author.last_name }} </h4>

         <p>{{ post.preview_text }}</p>
        <p>Комментарии: {{ post.comments_count }}</p>
        <p>Теги: {% for tag in post.tags.all %} <a href="{% url 'blog:tag' tag.slug %}"> #{{ tag }}</a> {% endfor %}</p>
        <p><a href="{{ post.get_absolute_url }}">Читать полностью</a></p>
        <hr>
    </li>
    {% endfor %}
    <br>


</ul>
<ul>
    {% for page in paginator.page_range %}
    {% if page_obj.number == page %}
    {{ page }}
    {% elif page >= page_obj.number|add:-2 and page <= page_obj.number|add:2 %}
    <a href="?page={{ page }}">{{ page }}</a>
    {% endif %}
    {% endfor %}

</ul>
</body>
</html>